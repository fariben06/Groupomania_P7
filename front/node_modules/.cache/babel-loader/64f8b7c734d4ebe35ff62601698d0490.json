{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Fd-Formation\\\\Desktop\\\\Groupomania\\\\front\\\\src\\\\components\\\\Article\\\\AddForm.js\";\nimport React from \"react\"; // Importer react pour utiliser les fonctionnalités de react\n\nimport axios from \"axios\"; // Importer axios pour utiliser les fonctionnalités de axios\n\nimport App from \"../App\"; // Importer le composant App pour utiliser les fonctionnalités de react\n\nimport Avatar from \"../Avatar/Avatar\"; // Importer le composant Avatar pour utiliser les fonctionnalités de react\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class AddForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // DATAS\n      userLogged: props.userLogged,\n      valueArticle: '',\n      fileUpload: null,\n      // OPTIONS\n      isValid: true,\n      isLoading: false\n    }; // Request Url\n\n    this.articleUrl = 'http://localhost:8080/api/articles'; // OnClick\n\n    this.OnSubmitArticle = this.OnSubmitArticle.bind(this);\n    this.OnChange = this.OnChange.bind(this);\n  } // Gestion de l'envoi.\n\n\n  OnSubmitArticle(event) {\n    const {\n      userLogged,\n      valueArticle,\n      fileUpload\n    } = this.state; // Object contain value forms\n\n    const formData = new FormData();\n    formData.append(\"userId\", userLogged.id);\n    formData.append(\"article\", valueArticle);\n    formData.append(\"image\", fileUpload);\n    event.preventDefault(); // Post request.\n\n    axios.post(this.articleUrl, formData, {\n      headers: {\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n      }\n    }).then(() => {\n      App.ReloadApp();\n    }).catch(error => {\n      console.error('Error Add Article!');\n      console.warn(error);\n    });\n  } // Gestion des events.\n\n\n  OnChange(event) {\n    const myState = event.target.name;\n\n    switch (myState) {\n      case 'article':\n        if (event.target.value.length) {\n          event.target.className = \"valid\";\n          this.setState({\n            isValid: false\n          });\n        } else {\n          event.target.className = \"\";\n          this.setState({\n            isValid: true\n          });\n        }\n\n        this.setState({\n          valueArticle: event.target.value\n        });\n        break;\n\n      case 'image':\n        if (event.target.value) this.setState({\n          isValid: false\n        });else this.setState({\n          isValid: true\n        });\n        this.setState({\n          fileUpload: event.target.files[0]\n        });\n        break;\n\n      default:\n        console.error('Nothing here!');\n        break;\n    }\n  }\n\n  render() {\n    const {\n      userLogged\n    } = this.state;\n    const {\n      isValid,\n      valueArticle\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"addArticle\",\n        onSubmit: this.OnSubmitArticle,\n        disabled: isValid,\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          dataUser: { ...userLogged,\n            isProfile: false\n          }\n        }, 'avatar-' + userLogged.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"article\",\n          children: \"article\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"article\",\n          type: \"text\",\n          name: \"article\",\n          placeholder: 'Quoi de neuf, ' + userLogged.firstname + ' ?',\n          value: valueArticle,\n          onChange: this.OnChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"image\",\n          className: \"file-upload\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"hidden\",\n            children: \"upload\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 64\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa-solid fa-image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 102\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"image\",\n          name: \"image\",\n          onChange: this.OnChange,\n          type: \"file\",\n          label: \"UploadImage\",\n          accept: \".jpg,.jpeg,.png,.gif\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          \"aria-label\": \"sendarticle\",\n          disabled: isValid,\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa-solid fa-paper-plane\",\n            alt: \"sendarticle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"hidden\",\n          name: \"userId\",\n          value: userLogged.id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }, this)\n    }, void 0, false);\n  }\n\n}","map":{"version":3,"names":["React","axios","App","Avatar","AddForm","Component","constructor","props","state","userLogged","valueArticle","fileUpload","isValid","isLoading","articleUrl","OnSubmitArticle","bind","OnChange","event","formData","FormData","append","id","preventDefault","post","headers","Authorization","sessionStorage","getItem","then","ReloadApp","catch","error","console","warn","myState","target","name","value","length","className","setState","files","render","isProfile","firstname"],"sources":["C:/Users/Fd-Formation/Desktop/Groupomania/front/src/components/Article/AddForm.js"],"sourcesContent":["import React from \"react\"; // Importer react pour utiliser les fonctionnalités de react\nimport axios from \"axios\"; // Importer axios pour utiliser les fonctionnalités de axios\nimport App from \"../App\";  // Importer le composant App pour utiliser les fonctionnalités de react\nimport Avatar from \"../Avatar/Avatar\"; // Importer le composant Avatar pour utiliser les fonctionnalités de react\n\nexport default class AddForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            // DATAS\n            userLogged: props.userLogged,\n            valueArticle: '',\n            fileUpload: null,\n            // OPTIONS\n            isValid: true,\n            isLoading: false\n        }\n        // Request Url\n        this.articleUrl = 'http://localhost:8080/api/articles';\n        // OnClick\n        this.OnSubmitArticle = this.OnSubmitArticle.bind(this);\n        this.OnChange = this.OnChange.bind(this);\n    }\n\n    // Gestion de l'envoi.\n    OnSubmitArticle(event) {\n        const { userLogged, valueArticle, fileUpload } = this.state;\n        // Object contain value forms\n        const formData = new FormData();\n        formData.append(\"userId\", userLogged.id);\n        formData.append(\"article\", valueArticle);\n        formData.append(\"image\", fileUpload);\n\n        event.preventDefault();\n        // Post request.\n        axios.post(this.articleUrl, formData, {\n            headers: {\n                Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n            }\n        }).then(() => { App.ReloadApp(); })\n            .catch(error => {\n                console.error('Error Add Article!');\n                console.warn(error);\n            });\n    }\n\n    // Gestion des events.\n    OnChange(event) {\n        const myState = event.target.name;\n        switch (myState) {\n            case 'article':\n                if (event.target.value.length) {\n                    event.target.className = \"valid\";\n                    this.setState({ isValid: false });\n                }\n                else {\n                    event.target.className = \"\";\n                    this.setState({ isValid: true });\n                }\n                this.setState({ valueArticle: event.target.value });\n                break;\n            case 'image':\n                if (event.target.value)\n                    this.setState({ isValid: false });\n                else\n                    this.setState({ isValid: true });\n\n                this.setState({ fileUpload: event.target.files[0] });\n                break;\n            default:\n                console.error('Nothing here!');\n                break;\n        }\n    }\n\n    render() {\n        const { userLogged } = this.state;\n        const { isValid, valueArticle } = this.state;\n        return (<>\n            <form className=\"addArticle\" onSubmit={this.OnSubmitArticle} disabled={isValid}>\n                <Avatar key={'avatar-' + userLogged.id} dataUser={{ ...userLogged, isProfile: false }} />\n                <label htmlFor=\"article\">article</label>\n                <input id=\"article\" type='text' name=\"article\" placeholder={'Quoi de neuf, ' + userLogged.firstname + ' ?'}\n                    value={valueArticle} onChange={this.OnChange} />\n                <label htmlFor=\"image\" className=\"file-upload\"><span className=\"hidden\">upload</span><i className=\"fa-solid fa-image\"></i></label>\n                <input id=\"image\" name=\"image\" onChange={this.OnChange} type=\"file\" label=\"UploadImage\" accept=\".jpg,.jpeg,.png,.gif\"></input>\n                <button aria-label=\"sendarticle\" disabled={isValid}>\n                    <i className=\"fa-solid fa-paper-plane\" alt=\"sendarticle\"></i>\n                </button>\n                <input type='hidden' name=\"userId\" value={userLogged.id} />\n            </form>\n        </>)\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}