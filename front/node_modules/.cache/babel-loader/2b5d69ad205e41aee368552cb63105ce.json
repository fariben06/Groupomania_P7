{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Fd-Formation\\\\Desktop\\\\Groupomania\\\\front\\\\src\\\\components\\\\Admin\\\\Member.js\";\nimport React from \"react\";\nimport axios from \"axios\"; // Import components.\n\nimport App from \"../App\";\nimport Avatar from \"../Avatar/Avatar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class Member extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // Datas\n      isLoading: false,\n      userLogged: props.userLogged,\n      member: props.member\n    };\n    this.userUrl = 'http://localhost:8080/api/user'; // Form control\n\n    this.OnSetAdmin = this.OnSetAdmin.bind(this);\n    this.OnDeleteUser = this.OnDeleteUser.bind(this);\n  } // Suppression d'un utilisateur.\n\n\n  async OnDeleteUser() {\n    const {\n      member\n    } = this.state;\n\n    if (window.confirm(`Vous êtes sur le point de supprimer définitivement le compte de :\\n${member.id} - ${member.firstname} ${member.lastname}\\nÊtes vous sûre ?`)) {\n      // On lui accorde les droits.\n      await axios.delete(this.userUrl + '/' + member.id + '/' + 0, {\n        headers: {\n          Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n        }\n      }).then(() => App.ReloadApp());\n    }\n  } // Attribution/Retrait des droits d'administrations.\n\n\n  async OnSetAdmin() {\n    const {\n      member\n    } = this.state; // Si le membre est deja admin\n\n    if (member.isAdmin) {\n      let newData = { ...member,\n        isAdmin: 0\n      };\n\n      if (window.confirm(`Vous êtes sur le point de retirer les droits à :\\n${member.firstname} ${member.lastname}\\nÊtes vous sûre ?`)) {\n        // On lui retire les droits d'admin et on le met en non-admin (0).\n        await axios.put(this.userUrl + '/' + member.id + '/' + 0, newData, {\n          headers: {\n            Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n          }\n        }).then(() => App.ReloadApp());\n      }\n    }\n  }\n\n  render() {\n    // Render component Member (Admin).\n    const {\n      isLoading,\n      userLogged,\n      member\n    } = this.state; // Données de l'état membre (Admin).\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: !isLoading && userLogged && member ?\n      /*#__PURE__*/\n      // Si l'utilisateur est connecté et que le membre existe\n      _jsxDEV(\"div\", {\n        className: \"member\",\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          dataUser: { ...member,\n            isProfile: false\n          }\n        }, member.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [member.firstname, \" \", member.lastname]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: !member.isDelete ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: member.id === 1 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"edit actived\",\n                disabled: member.isAdmin,\n                \"aria-label\": \"editAdmin\",\n                value: member.id,\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa-solid fa-lock-keyhole\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 65,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 64,\n                columnNumber: 17\n              }, this)\n            }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [member.isAdmin ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"edit actived\",\n                  \"aria-label\": \"editAdmin\",\n                  onClick: this.OnSetAdmin,\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa-solid fa-shield\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 70,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 69,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"delete\",\n                \"aria-label\": \"delUser\",\n                onClick: this.OnDeleteUser,\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa-solid fa-trash\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 76,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true)\n          }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"delete\",\n              \"aria-label\": \"delUser\",\n              onClick: this.OnDeleteUser,\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa-solid fa-trash\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 15\n            }, this)\n          }, void 0, false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this)]\n      }, 'Member-' + member.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this) : 'Error to load member!'\n    }, void 0, false);\n  }\n\n}","map":{"version":3,"names":["React","axios","App","Avatar","Member","Component","constructor","props","state","isLoading","userLogged","member","userUrl","OnSetAdmin","bind","OnDeleteUser","window","confirm","id","firstname","lastname","delete","headers","Authorization","sessionStorage","getItem","then","ReloadApp","isAdmin","newData","put","render","isProfile","isDelete"],"sources":["C:/Users/Fd-Formation/Desktop/Groupomania/front/src/components/Admin/Member.js"],"sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\n// Import components.\nimport App from \"../App\";\nimport Avatar from \"../Avatar/Avatar\";\n\nexport default class Member extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // Datas\n      isLoading: false,\n      userLogged: props.userLogged,\n      member: props.member,\n    };\n    this.userUrl = 'http://localhost:8080/api/user';\n    // Form control\n    this.OnSetAdmin = this.OnSetAdmin.bind(this);\n    this.OnDeleteUser = this.OnDeleteUser.bind(this);\n  }\n\n  // Suppression d'un utilisateur.\n  async OnDeleteUser() {\n    const { member } = this.state;\n    if (window.confirm(`Vous êtes sur le point de supprimer définitivement le compte de :\\n${member.id} - ${member.firstname} ${member.lastname}\\nÊtes vous sûre ?`)) {\n      // On lui accorde les droits.\n      await axios.delete(this.userUrl + '/' + member.id + '/' + 0, {\n        headers: {\n          Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n        }\n      }).then(() => App.ReloadApp());\n    }\n  }\n\n  // Attribution/Retrait des droits d'administrations.\n  async OnSetAdmin() {\n    const { member } = this.state;\n    // Si le membre est deja admin\n    if (member.isAdmin) {\n      let newData = { ...member, isAdmin: 0 };\n      if (window.confirm(`Vous êtes sur le point de retirer les droits à :\\n${member.firstname} ${member.lastname}\\nÊtes vous sûre ?`)) {\n        // On lui retire les droits d'admin et on le met en non-admin (0).\n        await axios.put(this.userUrl + '/' + member.id + '/' + 0, newData, {\n          headers: {\n            Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n          }\n        }).then(() => App.ReloadApp());\n      }\n    }\n  }\n\n  render() { // Render component Member (Admin).\n    const { isLoading, userLogged, member } = this.state; // Données de l'état membre (Admin).\n    return (<>\n      {!isLoading && userLogged && member ? ( // Si l'utilisateur est connecté et que le membre existe\n        <div className=\"member\" key={'Member-' + member.id}>\n          <Avatar key={member.id} dataUser={{ ...member, isProfile: false }} />\n          <p>{member.firstname} {member.lastname}</p>\n          <div>\n\n            {!member.isDelete ? (<>\n\n              {member.id === 1 ? (<>\n                <button className=\"edit actived\" disabled={member.isAdmin} aria-label=\"editAdmin\" value={member.id}>\n                  <i className=\"fa-solid fa-lock-keyhole\"></i>\n                </button>\n              </>) : (<>\n                {member.isAdmin ? (<>\n                  <button className=\"edit actived\" aria-label=\"editAdmin\" onClick={this.OnSetAdmin} >\n                    <i className=\"fa-solid fa-shield\"></i>\n                  </button>\n                </>) : (<>\n\n                </>)}\n                <button className=\"delete\" aria-label=\"delUser\" onClick={this.OnDeleteUser} >\n                  <i className=\"fa-solid fa-trash\"></i>\n                </button>\n              </>)}\n\n            </>) : (<>\n              <button className=\"delete\" aria-label=\"delUser\" onClick={this.OnDeleteUser} >\n                <i className=\"fa-solid fa-trash\"></i>\n              </button>\n            </>)}\n\n\n          </div>\n        </div>\n      ) : 'Error to load member!'}\n    </>)\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}