{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Fd-Formation\\\\Desktop\\\\Groupomania\\\\front\\\\src\\\\components\\\\Admin\\\\Member.js\";\nimport React from \"react\"; // Importer React pour utiliser les fonctionnalités de React JS \n\nimport axios from \"axios\"; // Importer axios pour utiliser les fonctionnalités de axios pour les requêtes HTTP et les requêtes AJAX (API)\n\nimport App from \"../App\"; // Importer App pour utiliser les fonctionnalités de App JS  (reload de la page)\n\nimport Avatar from \"../Avatar/Avatar\"; // Importer Avatar pour utiliser les fonctionnalités de Avatar JS  (avatar)\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class Member extends React.Component {\n  constructor(props) {\n    // Constructeur de la classe Member (Admin).\n    super(props); // Appel du constructeur de la classe parente (React.Component).\n\n    this.state = {\n      // Initialisation de l'état membre (Admin).\n      isLoading: false,\n      userLogged: props.userLogged,\n      // Si l'utilisateur est connecté ou non (Admin).\n      member: props.member // Si le membre existe ou non (Admin).\n\n    };\n    this.userUrl = 'http://localhost:8080/api/user'; // Url de l'API user (Admin).\n\n    this.OnSetAdmin = this.OnSetAdmin.bind(this); // On lie la fonction OnSetAdmin au this de la classe Member (Admin) pour pouvoir l'utiliser dans la fonction OnDeleteUser.\n\n    this.OnDeleteUser = this.OnDeleteUser.bind(this); // On lie la fonction OnDeleteUser au this de la classe Member (Admin) et au this de la classe App (reload de la page).\n  } // Fonction de suppression d'un utilisateur (Admin).\n\n\n  async OnDeleteUser() {\n    const {\n      member\n    } = this.state; // Données de l'état membre (Admin).\n\n    if (window.confirm(`Vous êtes sur le point de supprimer définitivement le compte de :\\n${member.id} - ${member.firstname} ${member.lastname}\\nÊtes vous sûre ?`)) {\n      // On lui accorde les droits.\n      await axios.delete(this.userUrl + '/' + member.id + '/' + 0, {\n        headers: {\n          Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n        }\n      }).then(() => App.ReloadApp());\n    }\n  } // Attribution/Retrait des droits d'administrations.\n\n\n  async OnSetAdmin() {\n    const {\n      member\n    } = this.state; // Si le membre est deja admin\n\n    if (member.isAdmin) {\n      let newData = { ...member,\n        isAdmin: 0\n      };\n\n      if (window.confirm(`Vous êtes sur le point de retirer les droits à :\\n${member.firstname} ${member.lastname}\\nÊtes vous sûre ?`)) {\n        // On lui retire les droits.\n        await axios.put(this.userUrl + '/' + member.id + '/' + 0, newData, {\n          headers: {\n            Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n          }\n        }).then(() => App.ReloadApp());\n      }\n    } // Sinon\n    else {\n      let newData = { ...member,\n        isAdmin: 1\n      };\n\n      if (window.confirm(`Vous êtes sur le point d'accorder les droits à :\\n${member.firstname} ${member.lastname}\\nÊtes vous sûre ?`)) {\n        // On lui accorde les droits.\n        await axios.put(this.userUrl + '/' + member.id + '/' + 0, newData, {\n          headers: {\n            Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n          }\n        }).then(() => App.ReloadApp());\n      }\n    }\n  }\n\n  render() {\n    // Render component Member (Admin).\n    const {\n      isLoading,\n      userLogged,\n      member\n    } = this.state; // Données de l'état membre (Admin).\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: !isLoading && userLogged && member ?\n      /*#__PURE__*/\n      // Si l'utilisateur est connecté et que le membre existe alors on affiche le membre.\n      _jsxDEV(\"div\", {\n        className: \"member\",\n        children: [\"  \", /*#__PURE__*/_jsxDEV(Avatar, {\n          dataUser: { ...member,\n            isProfile: false\n          }\n        }, member.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [member.firstname, \" \", member.lastname]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n          children: !member.isDelete ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: member.id === 1 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"edit actived\",\n                disabled: member.isAdmin,\n                \"aria-label\": \"editAdmin\",\n                value: member.id,\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa-solid fa-shield\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 77,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [member.isAdmin ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"edit actived\",\n                  \"aria-label\": \"editAdmin\",\n                  onClick: this.OnSetAdmin,\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa-solid fa-shield\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 82,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 81,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"delete\",\n                \"aria-label\": \"delUser\",\n                onClick: this.OnDeleteUser,\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa-solid fa-trash\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 88,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true)\n          }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"delete\",\n              \"aria-label\": \"delUser\",\n              onClick: this.OnDeleteUser,\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa-solid fa-trash\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 15\n            }, this)\n          }, void 0, false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)]\n      }, 'Member-' + member.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this) : 'Error to load member!'\n    }, void 0, false);\n  }\n\n}","map":{"version":3,"names":["React","axios","App","Avatar","Member","Component","constructor","props","state","isLoading","userLogged","member","userUrl","OnSetAdmin","bind","OnDeleteUser","window","confirm","id","firstname","lastname","delete","headers","Authorization","sessionStorage","getItem","then","ReloadApp","isAdmin","newData","put","render","isProfile","isDelete"],"sources":["C:/Users/Fd-Formation/Desktop/Groupomania/front/src/components/Admin/Member.js"],"sourcesContent":["import React from \"react\";  // Importer React pour utiliser les fonctionnalités de React JS \nimport axios from \"axios\";  // Importer axios pour utiliser les fonctionnalités de axios pour les requêtes HTTP et les requêtes AJAX (API)\nimport App from \"../App\";   // Importer App pour utiliser les fonctionnalités de App JS  (reload de la page)\nimport Avatar from \"../Avatar/Avatar\"; // Importer Avatar pour utiliser les fonctionnalités de Avatar JS  (avatar)\n\n\nexport default class Member extends React.Component {\n  constructor(props) { // Constructeur de la classe Member (Admin).\n    super(props); // Appel du constructeur de la classe parente (React.Component).\n    this.state = { // Initialisation de l'état membre (Admin).\n      isLoading: false,\n      userLogged: props.userLogged,  // Si l'utilisateur est connecté ou non (Admin).\n      member: props.member, // Si le membre existe ou non (Admin).\n    };\n\n    this.userUrl = 'http://localhost:8080/api/user'; // Url de l'API user (Admin).\n    this.OnSetAdmin = this.OnSetAdmin.bind(this); // On lie la fonction OnSetAdmin au this de la classe Member (Admin) pour pouvoir l'utiliser dans la fonction OnDeleteUser.\n    this.OnDeleteUser = this.OnDeleteUser.bind(this); // On lie la fonction OnDeleteUser au this de la classe Member (Admin) et au this de la classe App (reload de la page).\n  }\n\n  // Fonction de suppression d'un utilisateur (Admin).\n  async OnDeleteUser() {\n    const { member } = this.state; // Données de l'état membre (Admin).\n    if (window.confirm(`Vous êtes sur le point de supprimer définitivement le compte de :\\n${member.id} - ${member.firstname} ${member.lastname}\\nÊtes vous sûre ?`)) {\n      // On lui accorde les droits.\n      await axios.delete(this.userUrl + '/' + member.id + '/' + 0, {\n        headers: {\n          Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n        }\n      }).then(() => App.ReloadApp());\n    }\n  }\n\n  // Attribution/Retrait des droits d'administrations.\n  async OnSetAdmin() {\n    const { member } = this.state;\n    // Si le membre est deja admin\n    if (member.isAdmin) {\n      let newData = { ...member, isAdmin: 0 };\n      if (window.confirm(`Vous êtes sur le point de retirer les droits à :\\n${member.firstname} ${member.lastname}\\nÊtes vous sûre ?`)) {\n        // On lui retire les droits.\n        await axios.put(this.userUrl + '/' + member.id + '/' + 0, newData, {\n          headers: {\n            Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n          }\n        }).then(() => App.ReloadApp());\n      }\n    }\n    // Sinon\n    else {\n      let newData = { ...member, isAdmin: 1 };\n      if (window.confirm(`Vous êtes sur le point d'accorder les droits à :\\n${member.firstname} ${member.lastname}\\nÊtes vous sûre ?`)) {\n        // On lui accorde les droits.\n        await axios.put(this.userUrl + '/' + member.id + '/' + 0, newData, {\n          headers: {\n            Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n          }\n        }).then(() => App.ReloadApp());\n      }\n    }\n\n  }\n\n  render() { // Render component Member (Admin).\n    const { isLoading, userLogged, member } = this.state; // Données de l'état membre (Admin).\n    return (<>\n      {!isLoading && userLogged && member ? ( // Si l'utilisateur est connecté et que le membre existe alors on affiche le membre.\n        <div className=\"member\" key={'Member-' + member.id}>  {/* Si le membre est admin on affiche le bouton de suppression. */}\n          <Avatar key={member.id} dataUser={{ ...member, isProfile: false }} /> {/* Avatar du membre. */}\n          <p>{member.firstname} {member.lastname}</p> {/* Nom du membre. */}\n          <div>\n\n            {!member.isDelete ? (<>\n\n              {member.id === 1 ? (<> {/* Si le membre est admin on affiche le bouton de suppression. */}\n                <button className=\"edit actived\" disabled={member.isAdmin} aria-label=\"editAdmin\" value={member.id}>\n                  <i className=\"fa-solid fa-shield\"></i>\n                </button>\n              </>) : (<>\n                {member.isAdmin ? (<> {/* Si le membre est admin on affiche le bouton de suppression. */}\n                  <button className=\"edit actived\" aria-label=\"editAdmin\" onClick={this.OnSetAdmin} >\n                    <i className=\"fa-solid fa-shield\"></i>\n                  </button>\n                </>) : (<>\n\n                </>)}\n                <button className=\"delete\" aria-label=\"delUser\" onClick={this.OnDeleteUser} >\n                  <i className=\"fa-solid fa-trash\"></i>\n                </button>\n              </>)}\n\n            </>) : (<>\n              <button className=\"delete\" aria-label=\"delUser\" onClick={this.OnDeleteUser} >\n                <i className=\"fa-solid fa-trash\"></i>\n              </button>\n            </>)}\n\n\n          </div>\n        </div>\n      ) : 'Error to load member!'}\n    </>)\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}