{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Fd-Formation\\\\Desktop\\\\Groupomania\\\\front\\\\src\\\\components\\\\Article\\\\Article.js\";\nimport React from \"react\"; // Importer react pour utiliser les fonctionnalités de react\n\nimport axios from \"axios\"; // Importer axios pour utiliser les fonctionnalités de axios\n\nimport App from \"../App\"; // Importer le composant App pour utiliser les fonctionnalités de react\n\nimport Avatar from \"../Avatar/Avatar\"; // Importer le composant Avatar pour utiliser les fonctionnalités de react\n\nimport Comments from \"../Comments/Comments\"; // Importer le composant Comments pour utiliser les fonctionnalités de react\n\nimport Options from \"../Options/Options\"; // Importer le composant Options pour utiliser les fonctionnalités de react\n\nimport \"./Article.css\"; // Importer le fichier css Article.css\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class Article extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // Datas\n      article: props.dataArticle,\n      author: props.dataArticle.user,\n      userLogged: props.userLogged,\n      valueArticle: props.dataArticle.article,\n      likes: props.dataArticle.likes,\n      fileUpload: null,\n      // Comments\n      comments: props.dataArticle.comments,\n      commentsLoaded: false,\n      // Options\n      editArticle: false,\n      isEdited: false,\n      isClicked: false,\n      showComments: false\n    };\n    this.totalLike = props.dataArticle.likes.length;\n    this.totalComments = props.dataArticle.comments.length; // Request Url\n\n    this.commentsUrl = 'http://localhost:8080/api/comments?article=' + this.state.article.id;\n    this.articleUrl = 'http://localhost:8080/api/articles/';\n    this.likeUrl = 'http://localhost:8080/api/likes'; // Form control\n\n    this.onCommentsClick = this.onCommentsClick.bind(this);\n    this.onLikesClick = this.onLikesClick.bind(this);\n    this.onOptionsClick = this.onOptionsClick.bind(this);\n    this.onEditClick = this.onEditClick.bind(this);\n    this.OnChange = this.OnChange.bind(this);\n    this.onDeleteImage = this.onDeleteImage.bind(this);\n    this.onDeleteClick = this.onDeleteClick.bind(this);\n  } // Afficher/Cacher les commentaires.\n\n\n  async onCommentsClick(event) {\n    const {\n      showComments,\n      commentsLoaded\n    } = this.state;\n\n    switch (showComments) {\n      // Hide Comments.\n      default:\n      case true:\n        event.target.classList.remove('active');\n        this.setState({\n          showComments: false\n        });\n        break;\n      // Show Comments.\n\n      case false:\n        if (!commentsLoaded) {\n          let comments = await axios.get(this.commentsUrl, {\n            headers: {\n              Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n            }\n          }).then(res => {\n            if (res.status === 204) return [];\n            return res.data.comments;\n          });\n          this.setState({\n            comments: comments\n          });\n          if (comments) this.setState({\n            commentsLoaded: true\n          });\n        }\n\n        event.target.classList.add('active');\n        this.setState({\n          showComments: true\n        });\n        break;\n    }\n  } // Like/Unlike l'article.\n\n\n  async onLikesClick(event) {\n    const {\n      article,\n      userLogged\n    } = this.state;\n    const postLike = {\n      userId: userLogged.id,\n      articleId: article.id\n    };\n    this.setState({\n      isLoading: true\n    });\n    await axios.post(this.likeUrl, postLike, {\n      headers: {\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n      }\n    }).then(res => {\n      var _res$data;\n\n      // Update class target\n      if (!((_res$data = res.data) !== null && _res$data !== void 0 && _res$data.length)) event.target.classList.add(\"active\");else event.target.classList.remove(\"active\");\n      this.updateArticle();\n    });\n  } // Actualise les données de l'article pour les likes.\n\n\n  updateArticle() {\n    const {\n      article\n    } = this.state;\n    axios.get(this.articleUrl, {\n      headers: {\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n      }\n    }).then(res => {\n      res.data.articles.forEach(result => {\n        if (result.id === article.id) {\n          this.setState({\n            article: result\n          });\n          this.totalLike = result.likes.length;\n        }\n      });\n    });\n  } // Mise en page des options.\n\n\n  setOptions() {\n    const {\n      likes,\n      userLogged\n    } = this.state;\n    let isActive = '';\n    likes.forEach(like => {\n      if (like.userId === userLogged.id) isActive = \"active\";\n    });\n    return /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"options\",\n      children: [/*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"like \" + isActive,\n        onClick: this.onLikesClick,\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa-solid fa-heart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 73\n        }, this), \" J'aime\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"comments\",\n        onClick: this.onCommentsClick,\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa-solid fa-comment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 65\n        }, this), \" Commentaires\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this);\n  } // Afficher/Cacher les options.\n\n\n  async onOptionsClick(event) {\n    const {\n      isClicked\n    } = this.state;\n\n    switch (isClicked) {\n      // Hide Options.\n      default:\n      case true:\n        this.setState({\n          isClicked: false\n        });\n        break;\n      // Show Options.\n\n      case false:\n        this.setState({\n          isClicked: true\n        });\n        break;\n    }\n  } // Modification d'un article.\n\n\n  async onEditClick(event) {\n    event.preventDefault();\n    const {\n      valueArticle,\n      fileUpload\n    } = this.state;\n    const {\n      article,\n      editArticle,\n      isEdited\n    } = this.state;\n\n    if (editArticle) {\n      if (isEdited) {\n        // Object contain value forms\n        const formData = new FormData();\n        formData.set(\"message\", valueArticle);\n        if (fileUpload != null) formData.append(\"image\", fileUpload); // Update request.\n\n        await axios.put(this.articleUrl + article.id, formData, {\n          headers: {\n            Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n          }\n        }).then(() => {\n          this.setState({\n            editArticle: false\n          });\n          App.ReloadApp();\n        });\n      } else this.setState({\n        editArticle: false\n      });\n    } else {\n      this.setState({\n        editArticle: true\n      });\n    }\n  } // Gestion des events.\n\n\n  OnChange(event) {\n    const {\n      article\n    } = this.state;\n    const myCase = event.target.name;\n\n    switch (myCase) {\n      case 'message':\n        if (article.article !== event.target.value) this.setState({\n          isEdited: true\n        });else this.setState({\n          isEdited: false\n        });\n        this.setState({\n          valueArticle: event.target.value\n        });\n        break;\n\n      case 'picture':\n        console.log(event.target.files[0]);\n        this.setState({\n          isEdited: true,\n          fileUpload: event.target.files[0]\n        });\n        break;\n\n      default:\n        console.error('Nothing here!');\n        break;\n    }\n  } // Suppression d'une image.\n\n\n  async onDeleteImage() {\n    const {\n      article\n    } = this.state;\n\n    if (window.confirm('Vous êtes sur le point de supprimer votre image...\\nEtes vous sure ?')) {\n      // Delete request.\n      await axios.delete(this.articleUrl + article.id + '/' + 1, {\n        headers: {\n          Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n        }\n      }).then(() => App.ReloadApp());\n    }\n  } // Suppression d'un article.\n\n\n  async onDeleteClick() {\n    const {\n      article\n    } = this.state;\n\n    if (window.confirm('Vous êtes sur le point de supprimer cet article...\\nÊtes vous sûre ?')) {\n      // Delete request.\n      await axios.delete(this.articleUrl + article.id + '/' + 0, {\n        headers: {\n          Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n        }\n      }).then(() => App.ReloadApp()); // Rafraichissement de la page.\n    }\n  } // Convertisseur de date en string pour l'affichage de la date de publication de l'article dans le composant.\n\n\n  convertDate() {\n    const {\n      article\n    } = this.state; // Récupération de l'article.\n\n    const start = new Date(article.postDate).getTime(); // Récupération de la date de publication de l'article.\n\n    const current = Date.now(); // Récupération de la date actuelle du système.\n\n    const result = new Date(current - start); // Calcul de la différence entre la date de publication de l'article et la date actuelle.\n\n    let since = new Date(result); // Conversion de la différence en date pour l'affichage dans le composant.\n\n    if (since.getFullYear() <= 1970) {\n        // Si l'année de la différence est inférieure à 1970, on affiche \"Il y a moins de 1 an\" (1 an = 365 jours).\n        if (since.getMonth() + 1 <= 1) {\n            // Si le mois de la différence est inférieur à 1, on affiche \"Il y a moins de 1 mois\" (1 mois = 30 jours).\n            if (since.getDate() <= 1) {\n                // Si le jour de la différence est inférieur à 1, on affiche \"Il y a moins de 1 jour\" (1 jour = 24 heures).\n                if (since.getHours() <= 1) {\n                    // Si l'heure de la différence est inférieur à 1, on affiche \"Il y a moins de 1 heure\" (1 heure = 60 minutes).\n                    if (since.getMinutes() < 1) // Si les minutes de la différence sont inférieures à 1, on affiche \"Il y a moins de 1 minute\" (1 minute = 60 secondes).\n                      since = new Date(result).getSeconds() + 'sec.'; // Si les secondes de la différence sont inférieures à 1, on affiche \"Il y a moins de 1 seconde\" (1 seconde = 1000 millisecondes).\n                    else since = since.getMinutes() + 'min.'; // Sinon, on affiche le nombre de minutes de la différence entre la date de publication de l'article et la date actuelle.\n\n                } else since = since.getHours() + 'h.'; // Sinon, on affiche le nombre d'heures de la différence entre la date de publication de l'article et la date actuelle.\n\n            } else since = since.getDate() + 'j.'; // Sinon, on affiche le nombre de jours de la différence entre la date de publication de l'article et la date actuelle.\n\n        } else since = since.getMonth() + 1 + 'm.'; // Sinon, on affiche le nombre de mois de la différence entre la date de publication de l'article et la date actuelle.\n\n    } else since = since.getFullYear() + 'y.'; // Sinon, on affiche le nombre d'années de la différence entre la date de publication de l'article et la date actuelle.\n\n    return `${since}`; // Retourne la date de publication de l'article.\n  }\n\n  render() {\n    const {\n      editArticle,\n      article,\n      likes,\n      author,\n      userLogged\n    } = this.state;\n    const {\n      isClicked\n    } = this.state;\n    const {\n      showComments,\n      comments,\n      commentsLoaded\n    } = this.state;\n    const {\n      valueArticle,\n      fileUpload\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: !editArticle ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: article ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"article\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"article-author\",\n              children: [/*#__PURE__*/_jsxDEV(Avatar, {\n                dataUser: { ...author,\n                  isProfile: false\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"author-infos\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: [author.firstname, \" \", author.lastname]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: [author.task.tasks, \" | \", /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa-solid fa-clock\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 259,\n                    columnNumber: 43\n                  }, this), \" \", this.convertDate()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 15\n              }, this), article.authorId === userLogged.id || userLogged.isAdmin ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"article-options\",\n                  onClick: this.onOptionsClick,\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa-solid fa-ellipsis\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 264,\n                    columnNumber: 19\n                  }, this), isClicked ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: /*#__PURE__*/_jsxDEV(Options, {\n                      onEditClick: this.onEditClick,\n                      onDeleteClick: this.onDeleteClick,\n                      dataArticle: article,\n                      for: 'Article'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 266,\n                      columnNumber: 21\n                    }, this)\n                  }, void 0, false) : null]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"article-no-options\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: article.article\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 13\n            }, this), article.image === 'none' ? null : /*#__PURE__*/_jsxDEV(\"img\", {\n              src: article.image,\n              alt: \"postedImage\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 48\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"infos-total\",\n              children: [likes && this.totalLike >= 1 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"like\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa-solid fa-heart\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 279,\n                    columnNumber: 37\n                  }, this), \" \", this.totalLike, \" J'aime\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 279,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false) : null, comments.length ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"comment\",\n                  children: [comments.length, \" commentaire(s) \", /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa-solid fa-comment\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 283,\n                    columnNumber: 73\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false) : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 13\n            }, this), this.setOptions(), showComments ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: commentsLoaded ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(Comments, {\n                  userLogged: userLogged,\n                  articleId: article.id,\n                  comments: comments\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 292,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n            }, void 0, false) : null]\n          }, article.id + '-article', true, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 11\n          }, this)\n        }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n      }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"article\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"article-author\",\n            children: [/*#__PURE__*/_jsxDEV(Avatar, {\n              dataUser: { ...author,\n                isProfile: false\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"author-infos\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: [author.firstname, \" \", author.lastname]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                children: [author.task.tasks, \" | \", /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa-solid fa-clock\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 41\n                }, this), \" \", this.convertDate()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"article-no-options\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: this.onEditClick,\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"hidden\",\n                  children: \"confirm edit article\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 308,\n                  columnNumber: 50\n                }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa-solid fa-check\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 308,\n                  columnNumber: 102\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: this.onEditClick,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"message\",\n              children: \"message\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"message\",\n              type: \"text\",\n              name: \"message\",\n              placeholder: \"Un petit mot ?\",\n              defaultValue: valueArticle,\n              onChange: this.OnChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"article-edit-avatar\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"picture\",\n                className: \"file-upload\",\n                onChange: this.OnChange,\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"hidden\",\n                  children: \"picture\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 17\n                }, this), fileUpload ? /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa-solid fa-xmark\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 31\n                }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa-solid fa-image\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 71\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"picture\",\n                name: \"picture\",\n                type: \"file\",\n                label: \"UploadImage\",\n                accept: \".jpg,.jpeg,.png,.gif\",\n                onChange: this.OnChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 15\n              }, this), article.image !== 'none' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  label: \"delAvatar\",\n                  onClick: this.onDeleteImage,\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"hidden\",\n                    children: \"delete Avatar\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 326,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa-solid fa-trash\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 327,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 325,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: article.image,\n                  alt: \"postedImage\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true) : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 11\n          }, this)]\n        }, 'edit-article-' + article.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 9\n        }, this)\n      }, void 0, false)\n    }, void 0, false);\n  }\n\n}","map":{"version":3,"names":["React","axios","App","Avatar","Comments","Options","Article","Component","constructor","props","state","article","dataArticle","author","user","userLogged","valueArticle","likes","fileUpload","comments","commentsLoaded","editArticle","isEdited","isClicked","showComments","totalLike","length","totalComments","commentsUrl","id","articleUrl","likeUrl","onCommentsClick","bind","onLikesClick","onOptionsClick","onEditClick","OnChange","onDeleteImage","onDeleteClick","event","target","classList","remove","setState","get","headers","Authorization","sessionStorage","getItem","then","res","status","data","add","postLike","userId","articleId","isLoading","post","updateArticle","articles","forEach","result","setOptions","isActive","like","preventDefault","formData","FormData","set","append","put","ReloadApp","myCase","name","value","console","log","files","error","window","confirm","delete","convertDate","start","Date","postDate","getTime","current","now","since","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","render","isProfile","firstname","lastname","task","tasks","authorId","isAdmin","image"],"sources":["C:/Users/Fd-Formation/Desktop/Groupomania/front/src/components/Article/Article.js"],"sourcesContent":["import React from \"react\"; // Importer react pour utiliser les fonctionnalités de react\nimport axios from \"axios\"; // Importer axios pour utiliser les fonctionnalités de axios\nimport App from \"../App\";  // Importer le composant App pour utiliser les fonctionnalités de react\nimport Avatar from \"../Avatar/Avatar\"; // Importer le composant Avatar pour utiliser les fonctionnalités de react\nimport Comments from \"../Comments/Comments\"; // Importer le composant Comments pour utiliser les fonctionnalités de react\nimport Options from \"../Options/Options\"; // Importer le composant Options pour utiliser les fonctionnalités de react\nimport \"./Article.css\"; // Importer le fichier css Article.css\n\n\nexport default class Article extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // Datas\n      article: props.dataArticle,\n      author: props.dataArticle.user,\n      userLogged: props.userLogged,\n      valueArticle: props.dataArticle.article,\n      likes: props.dataArticle.likes,\n      fileUpload: null,\n      // Comments\n      comments: props.dataArticle.comments,\n      commentsLoaded: false,\n      // Options\n      editArticle: false,\n      isEdited: false,\n      isClicked: false,\n      showComments: false\n    };\n    this.totalLike = props.dataArticle.likes.length;\n    this.totalComments = props.dataArticle.comments.length;\n    // Request Url\n    this.commentsUrl = 'http://localhost:8080/api/comments?article=' + this.state.article.id;\n    this.articleUrl = 'http://localhost:8080/api/articles/';\n    this.likeUrl = 'http://localhost:8080/api/likes';\n    // Form control\n    this.onCommentsClick = this.onCommentsClick.bind(this);\n    this.onLikesClick = this.onLikesClick.bind(this);\n    this.onOptionsClick = this.onOptionsClick.bind(this);\n    this.onEditClick = this.onEditClick.bind(this);\n    this.OnChange = this.OnChange.bind(this);\n    this.onDeleteImage = this.onDeleteImage.bind(this);\n    this.onDeleteClick = this.onDeleteClick.bind(this);\n  }\n\n  // Afficher/Cacher les commentaires.\n  async onCommentsClick(event) {\n    const { showComments, commentsLoaded } = this.state;\n    switch (showComments) {\n      // Hide Comments.\n      default:\n      case true:\n        event.target.classList.remove('active');\n        this.setState({ showComments: false });\n        break;\n      // Show Comments.\n      case false:\n        if (!commentsLoaded) {\n          let comments = await axios.get(this.commentsUrl, {\n            headers: {\n              Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n            }\n          })\n            .then((res) => {\n              if (res.status === 204) return [];\n              return res.data.comments;\n            });\n          this.setState({ comments: comments });\n          if (comments) this.setState({ commentsLoaded: true });\n        }\n        event.target.classList.add('active');\n        this.setState({ showComments: true });\n        break;\n    }\n  }\n\n  // Like/Unlike l'article.\n  async onLikesClick(event) {\n    const { article, userLogged } = this.state;\n    const postLike = {\n      userId: userLogged.id,\n      articleId: article.id\n    }\n    this.setState({ isLoading: true });\n    await axios.post(this.likeUrl, postLike, {\n      headers: {\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n      }\n    }).then((res) => {\n      // Update class target\n      if (!res.data?.length) event.target.classList.add(\"active\");\n      else event.target.classList.remove(\"active\");\n      this.updateArticle();\n    });\n  }\n\n  // Actualise les données de l'article pour les likes.\n  updateArticle() {\n    const { article } = this.state;\n    axios.get(this.articleUrl, {\n      headers: {\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n      }\n    }).then((res) => {\n      res.data.articles.forEach((result) => {\n        if (result.id === article.id) {\n          this.setState({ article: result });\n          this.totalLike = result.likes.length;\n        }\n      });\n    })\n  }\n\n  // Mise en page des options.\n  setOptions() {\n    const { likes, userLogged } = this.state;\n    let isActive = '';\n    likes.forEach(like => {\n      if (like.userId === userLogged.id) isActive = \"active\";\n    });\n\n    return (\n      <ul className=\"options\">\n        <li className={\"like \" + isActive} onClick={this.onLikesClick} ><i className=\"fa-solid fa-heart\"></i> J'aime</li>\n        <li className=\"comments\" onClick={this.onCommentsClick}><i className=\"fa-solid fa-comment\"></i> Commentaires</li>\n      </ul>\n    );\n  }\n\n  // Afficher/Cacher les options.\n  async onOptionsClick(event) {\n    const { isClicked } = this.state;\n    switch (isClicked) {\n      // Hide Options.\n      default:\n      case true:\n        this.setState({ isClicked: false });\n        break;\n      // Show Options.\n      case false:\n        this.setState({ isClicked: true });\n        break;\n    }\n  }\n\n  // Modification d'un article.\n  async onEditClick(event) {\n    event.preventDefault();\n    const { valueArticle, fileUpload } = this.state;\n    const { article, editArticle, isEdited } = this.state;\n\n    if (editArticle) {\n      if (isEdited) {\n        // Object contain value forms\n        const formData = new FormData();\n        formData.set(\"message\", valueArticle);\n        if (fileUpload != null) formData.append(\"image\", fileUpload);\n        // Update request.\n        await axios.put(this.articleUrl + article.id, formData, {\n          headers: {\n            Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n          }\n        }).then(() => {\n          this.setState({ editArticle: false });\n          App.ReloadApp();\n        });\n      }\n      else this.setState({ editArticle: false });\n    }\n    else {\n      this.setState({ editArticle: true });\n    }\n  }\n\n  // Gestion des events.\n  OnChange(event) {\n    const { article } = this.state;\n    const myCase = event.target.name;\n    switch (myCase) {\n      case 'message':\n        if (article.article !== event.target.value) this.setState({ isEdited: true });\n        else this.setState({ isEdited: false });\n        this.setState({ valueArticle: event.target.value });\n        break;\n      case 'picture':\n        console.log(event.target.files[0]);\n        this.setState({ isEdited: true, fileUpload: event.target.files[0] });\n        break;\n      default:\n        console.error('Nothing here!');\n        break;\n    }\n  }\n\n  // Suppression d'une image.\n  async onDeleteImage() {\n    const { article } = this.state;\n    if (window.confirm('Vous êtes sur le point de supprimer votre image...\\nEtes vous sure ?')) {\n      // Delete request.\n      await axios.delete(this.articleUrl + article.id + '/' + 1, {\n        headers: {\n          Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n        }\n      })\n        .then(() => App.ReloadApp());\n    }\n  }\n\n  // Suppression d'un article.\n  async onDeleteClick() {\n    const { article } = this.state;\n    if (window.confirm('Vous êtes sur le point de supprimer cet article...\\nÊtes vous sûre ?')) {\n      // Delete request.\n      await axios.delete(this.articleUrl + article.id + '/' + 0, {\n        headers: {\n          Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n        }\n      })\n        .then(() => App.ReloadApp()); // Rafraichissement de la page.\n    }\n  }\n\n  // Convertisseur de date en string pour l'affichage de la date de publication de l'article dans le composant.\n  convertDate() {\n    const { article } = this.state; // Récupération de l'article.\n    const start = new Date(article.postDate).getTime(); // Récupération de la date de publication de l'article.\n    const current = Date.now(); // Récupération de la date actuelle du système.\n    const result = new Date(current - start); // Calcul de la différence entre la date de publication de l'article et la date actuelle.\n    let since = new Date(result); // Conversion de la différence en date pour l'affichage dans le composant.\n    if (since.getFullYear() <= 1970) // Si l'année de la différence est inférieure à 1970, on affiche \"Il y a moins de 1 an\" (1 an = 365 jours).\n      if (since.getMonth() + 1 <= 1) // Si le mois de la différence est inférieur à 1, on affiche \"Il y a moins de 1 mois\" (1 mois = 30 jours).\n        if (since.getDate() <= 1) // Si le jour de la différence est inférieur à 1, on affiche \"Il y a moins de 1 jour\" (1 jour = 24 heures).\n          if (since.getHours() <= 1) // Si l'heure de la différence est inférieur à 1, on affiche \"Il y a moins de 1 heure\" (1 heure = 60 minutes).\n            if (since.getMinutes() < 1) // Si les minutes de la différence sont inférieures à 1, on affiche \"Il y a moins de 1 minute\" (1 minute = 60 secondes).\n              since = new Date(result).getSeconds() + 'sec.'; // Si les secondes de la différence sont inférieures à 1, on affiche \"Il y a moins de 1 seconde\" (1 seconde = 1000 millisecondes).\n            else since = since.getMinutes() + 'min.'; // Sinon, on affiche le nombre de minutes de la différence entre la date de publication de l'article et la date actuelle.\n          else since = since.getHours() + 'h.'; // Sinon, on affiche le nombre d'heures de la différence entre la date de publication de l'article et la date actuelle.\n        else since = since.getDate() + 'j.'; // Sinon, on affiche le nombre de jours de la différence entre la date de publication de l'article et la date actuelle.\n      else since = since.getMonth() + 1 + 'm.'; // Sinon, on affiche le nombre de mois de la différence entre la date de publication de l'article et la date actuelle.\n    else since = since.getFullYear() + 'y.'; // Sinon, on affiche le nombre d'années de la différence entre la date de publication de l'article et la date actuelle.\n\n    return `${since}`; // Retourne la date de publication de l'article.\n  }\n\n  render() {\n    const { editArticle, article, likes, author, userLogged } = this.state;\n    const { isClicked } = this.state;\n    const { showComments, comments, commentsLoaded } = this.state;\n    const { valueArticle, fileUpload } = this.state;\n    return (<>\n\n      {!editArticle ? (<>\n        {article ? (<>\n          <article key={article.id + '-article'}>\n            <div className=\"article-author\">\n              <Avatar dataUser={{ ...author, isProfile: false }} />\n              <div className=\"author-infos\">\n                <h3>{author.firstname} {author.lastname}</h3>\n                <h4>{author.task.tasks} | <i className=\"fa-solid fa-clock\"></i> {this.convertDate()}</h4>\n              </div>\n\n              {article.authorId === userLogged.id || userLogged.isAdmin ? (<>\n                <div className=\"article-options\" onClick={this.onOptionsClick}>\n                  <i className=\"fa-solid fa-ellipsis\"></i>\n                  {isClicked ? (<>\n                    <Options onEditClick={this.onEditClick} onDeleteClick={this.onDeleteClick} dataArticle={article} for={'Article'} />\n                  </>) : null}\n                </div>\n              </>) : (<>\n                <div className=\"article-no-options\"></div>\n              </>)}\n            </div>\n\n            <p>{article.article}</p>\n            {article.image === 'none' ? null : <img src={article.image} alt='postedImage' />}\n\n            <div className=\"infos-total\">\n              {likes && this.totalLike >= 1 ? (<>\n                <p className=\"like\"><i className=\"fa-solid fa-heart\"></i> {this.totalLike} J'aime</p>\n              </>) : null}\n              {/*<p className=\"like\"><i className=\"fa-solid fa-heart\"></i> 1 J'aime</p>*/}\n              {comments.length ? (<>\n                <p className=\"comment\">{comments.length} commentaire(s) <i className=\"fa-solid fa-comment\"></i></p>\n              </>) : null}\n            </div>\n\n            {this.setOptions()}\n\n            {showComments ? (<>\n\n              {commentsLoaded ? (<>\n                <Comments userLogged={userLogged} articleId={article.id} comments={comments} />\n              </>) : (<></>)}\n\n            </>) : null}\n          </article>\n        </>) : (<></>)}\n\n      </>) : (<>\n        <article key={'edit-article-' + article.id}>\n          <div className=\"article-author\">\n            <Avatar dataUser={{ ...author, isProfile: false }} />\n            <div className=\"author-infos\">\n              <h3>{author.firstname} {author.lastname}</h3>\n              <h4>{author.task.tasks} | <i className=\"fa-solid fa-clock\"></i> {this.convertDate()}</h4>\n            </div>\n            <div className=\"article-no-options\">\n              <button onClick={this.onEditClick}><span className=\"hidden\">confirm edit article</span><i className=\"fa-solid fa-check\"></i></button>\n            </div>\n          </div>\n\n          <form onSubmit={this.onEditClick}>\n            <label htmlFor=\"message\">message</label>\n            <input id=\"message\" type='text' name=\"message\" placeholder='Un petit mot ?'\n              defaultValue={valueArticle} onChange={this.OnChange} />\n\n            <div className='article-edit-avatar'>\n              <label htmlFor=\"picture\" className=\"file-upload\" onChange={this.OnChange}>\n                <span className=\"hidden\">picture</span>\n                {fileUpload ? <i className=\"fa-solid fa-xmark\"></i> : <i className=\"fa-solid fa-image\"></i>}\n              </label>\n              <input id=\"picture\" name='picture' type='file' label='UploadImage'\n                accept=\".jpg,.jpeg,.png,.gif\" onChange={this.OnChange} />\n              {article.image !== 'none' ? (<>\n                <button label='delAvatar' onClick={this.onDeleteImage}>\n                  <span className=\"hidden\">delete Avatar</span>\n                  <i className=\"fa-solid fa-trash\"></i>\n                </button>\n                <img src={article.image} alt='postedImage' />\n              </>) : null}\n            </div>\n          </form>\n        </article>\n      </>)}\n    </>\n    )\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}